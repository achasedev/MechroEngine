///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: March 25th, 2020
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Job/JobSystem.h"
#include <thread>

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
class Job;

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
class JobWorkerThread
{
public:
	//-----Public Methods-----

	JobWorkerThread(const char* name, WorkerThreadFlags flags);
	~JobWorkerThread();
	
	std::string		GetName() const { return m_name; }
	bool			IsRunning() const { return m_isRunning; }

	void StopRunning() { m_isRunning = false; }
	void Join();


private:
	//-----Private Methods-----

	void JobWorkerThreadEntry();
	Job* DequeueJobForExecution();
	void MarkJobAsFinished(Job* finishedJob);


private:
	//-----Private Data-----

	std::string			m_name;
	std::thread			m_threadHandle;
	WorkerThreadFlags	m_workerFlags;
	bool				m_isRunning = true;

};


///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

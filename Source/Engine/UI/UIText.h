///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: April 21st, 2020
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Framework/Rgba.h"
#include "Engine/UI/UIElement.h"

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
class Font;
class OBB2;
class Shader;

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
class UIText : public UIElement
{
public:
	//-----Public Methods-----

	UIText(Canvas* canvas);
	virtual ~UIText();

	virtual void	Render() override;
	void			SetText(const std::string& text, const Rgba& color = Rgba::WHITE);
	void			SetFont(Font* font);
	void			SetShader(Shader* shader);
	virtual void	InitializeFromXML(const XMLElem& element) override;


private:
	//-----Private Data-----

	uint32			CalculatePixelHeightForBounds(const OBB2& finalBounds);
	void			UpdateMeshAndMaterial(const OBB2& finalBounds);


private:
	//-----Private Data-----

	std::string m_text;
	Rgba		m_textColor;
	Mesh*		m_mesh = nullptr;
	Material*	m_material = nullptr;
	Font*		m_font = nullptr;
	float		m_fontHeight = 0.f;
	bool		m_isDirty = true;

};


///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

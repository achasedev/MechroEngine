///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: April 4th, 2020
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Framework/EngineCommon.h"
#include "Engine/UI/Canvas.h"
#include "Engine/UI/UIElement.h"

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS IMPLEMENTATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
Canvas::~Canvas()
{
	uint32 numChildren = (uint32)m_uiElements.size();
	for (uint32 childIndex = 0; childIndex < numChildren; ++childIndex)
	{
		SAFE_DELETE_POINTER(m_uiElements[childIndex]);
	}

	m_uiElements.clear();
}


//-------------------------------------------------------------------------------------------------
void Canvas::SetReferenceDimensions(float height, float aspect)
{
	float width = aspect * height;
	
	m_bounds = AABB2(Vector2(0.f), Vector2(width, height));
	m_aspect = aspect;
}


//-------------------------------------------------------------------------------------------------
void Canvas::Render() const
{
	uint32 numChildren = (uint32)m_uiElements.size();
	for (uint32 childIndex = 0; childIndex < numChildren; ++childIndex)
	{
		m_uiElements[childIndex]->Render();
	}
}

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: April 24th, 2021
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Core/EngineCommon.h"
#include "Engine/Physics/Particle/ParticleForceGenerator.h"
#include "Engine/Physics/Particle/ParticleGeneratorRegistry.h"

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS IMPLEMENTATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
void ParticleGeneratorRegistry::GenerateAndApplyForces(float deltaSeconds)
{
	for (int regIndex = 0; regIndex < (int)m_registrations.size(); ++regIndex)
	{
		ParticleGenRegistration& reg = m_registrations[regIndex];
		reg.m_generator->GenerateAndApplyForce(reg.m_particle, deltaSeconds);
	}
}


//-------------------------------------------------------------------------------------------------
void ParticleGeneratorRegistry::AddRegistration(Particle* particle, ParticleForceGenerator* generator)
{
	m_registrations.push_back(ParticleGenRegistration(particle, generator));
}

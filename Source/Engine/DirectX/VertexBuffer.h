///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: December 16th, 2019
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                             *** INCLUDES ***
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/DirectX/RenderBuffer.h"
#include "Engine/DirectX/Vertex.h"

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                             *** DEFINES ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                              *** TYPES ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                             *** STRUCTS ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                        *** GLOBALS AND STATICS ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                             *** CLASSES ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
class VertexBuffer : public RenderBuffer
{
public:
	//-----Public Methods-----

	VertexBuffer() {}
	~VertexBuffer() {}

	template <typename VERT_TYPE>
	bool CopyToGPU(const VERT_TYPE* vertices, const uint vertexCount)
	{
		size_t sizeNeeded = sizeof(VERT_TYPE) * vertexCount;

		bool succeeded = false;
		if (sizeNeeded > GetBufferSize() || IsStatic())
		{
			succeeded = CreateOnGPU(vertices, sizeNeeded, sizeof(VERT_TYPE), RENDER_BUFFER_USAGE_VERTEX_STREAM_BIT, GPU_MEMORY_USAGE_DYNAMIC);
		}
		else
		{
			ASSERT_OR_DIE(IsDynamic(), "VertexBuffer not dynamic!");
			succeeded = RenderBuffer::CopyToGPU(vertices, sizeNeeded);
		}

		m_vertexCount = (succeeded ? vertexCount : 0U);

		return succeeded;
	}


private:
	//-----Private Data-----

	uint m_vertexCount = 0;
	// const VertexLayout* m_layout = nullptr;

};

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                           *** C FUNCTIONS ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

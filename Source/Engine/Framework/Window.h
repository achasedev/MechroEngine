///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: November 29th, 2019
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                             *** INCLUDES ***
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Math/AABB2.h"
#include <string>
#include <vector>

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                             *** DEFINES ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                              *** TYPES ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

// Returns false to consume the message from windows, true otherwise
typedef bool(*WindowsMessageHandler)(unsigned int msg, size_t wparam, size_t lparam);

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                             *** STRUCTS ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                        *** GLOBALS AND STATICS ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                             *** CLASSES ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
class Window
{
public:
	//-----Public Methods-----

	static void	Initialize(float aspect, const char* windowTitle);
	static void ShutDown();
	static Window* GetInstance() { return s_instance; }

	void	SetWindowPixelBounds(const AABB2& newBounds);
	void	RegisterMessageHandler(WindowsMessageHandler handler);
	void	UnregisterMessageHandler(WindowsMessageHandler handler);

	AABB2	GetPixelBounds() const		{ return m_pixelBounds; }
	Vector2 GetPixelDimensions() const	{ return m_pixelBounds.GetDimensions(); }
	int		GetPixelWidth() const		{ return static_cast<int>(m_pixelBounds.GetWidth()); }
	int		GetPixelHeight() const		{ return static_cast<int>(m_pixelBounds.GetHeight()); }

	const std::vector<WindowsMessageHandler>& GetHandlers() const { return m_messageHandlers; }


private:
	//-----Private Methods-----

	Window(float aspect, const char* windowTitle);
	~Window();
	Window(const Window& copy) = delete;


private:
	//-----Private Data-----

	void*		m_windowContext = nullptr;
	std::string m_windowTitle;
	AABB2		m_pixelBounds;

	// Handlers for windows messages
	std::vector<WindowsMessageHandler> m_messageHandlers;

	// Singleton
	static Window* s_instance;
};


///--------------------------------------------------------------------------------------------------------------------------------------------------
///                                                           *** C FUNCTIONS ***
///--------------------------------------------------------------------------------------------------------------------------------------------------

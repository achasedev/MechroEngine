///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: Nov 16th, 2021
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Core/EngineCommon.h"
#include "Engine/Math/MathUtils.h"
#include "Engine/Math/Matrix3.h"
#include "Engine/Math/Triangle2.h"
#include "Engine/Math/Triangle3.h"


///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS IMPLEMENTATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
Triangle2 Triangle3::GetInPlaneRepresentation() const
{
	return Triangle2();
}


//-------------------------------------------------------------------------------------------------
Vector2 Triangle3::TransformPointInto2DBasis(const Vector3& point) const
{
	Matrix3 basis;
	GetBasis(basis);
	basis.Invert();

	return (basis * (point - m_a)).xy;
}


//-------------------------------------------------------------------------------------------------
Vector3 Triangle3::TransformPointOutOf2DBasis(const Vector2& point) const
{
	Matrix3 basisVectors;
	GetBasis(basisVectors);

	return basisVectors.iBasis * point.x + basisVectors.jBasis * point.y + m_a;
}


//-------------------------------------------------------------------------------------------------
void Triangle3::GetBasis(Matrix3& out_bases) const
{
	Vector3 i = (m_b - m_a);
	Vector3 j = (m_c - m_a);
	Vector3 k = CrossProduct(i, j);
	out_bases = Matrix3(i, j, k);
}

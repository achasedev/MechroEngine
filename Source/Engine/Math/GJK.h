///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: Nov 12th, 2021
/// Description: File for all GJK computations
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
enum SimplexResult
{
	SIMPLEX_RESULT_NO_INTERSECTION,
	SIMPLEX_RESULT_INTERSECTION_FOUND,
	SIMPLEX_RESULT_STILL_EVOLVING
};

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------


//-------------------------------------------------------------------------------------------------
class Simplex
{
public:
	//-----Public Methods-----


private:
	//-----Private Data-----

};


//-------------------------------------------------------------------------------------------------
class ExpandingPolytope
{
public:
	//-----Public Methods-----


private:
	//-----Private Data-----

};


//-------------------------------------------------------------------------------------------------
template <typename A, typename B>
class GJKSolver
{
public:
	//-----Public Methods-----

	GJKSolver(const A& a, const b& b);

	void Solve();


private:
	//-----Private Methods-----

	void			SetupSimplex();
	SimplexResult	EvolveSimplex();
	void			PerformEPA();


private:
	//-----Private Data-----

	A m_a;
	B m_b;
	Simplex m_simplex;
	ExpandingPolytope m_ePoly;

	
};


//-------------------------------------------------------------------------------------------------
template <typename A, typename B>
void GJKSolver<A, B>::Solve()
{
	SetupSimplex();

	SimplexResult result = SIMPLEX_RESULT_STILL_EVOLVING;
	while (result == SIMPLEX_RESULT_STILL_EVOLVING)
	{
		result = EvolveSimplex();
	}

	if (result == SIMPLEX_RESULT_INTERSECTION_FOUND)
	{
		PerformEPA();
	}


}

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
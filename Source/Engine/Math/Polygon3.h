///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: Nov 16th, 2021
/// Description: 2D shape in 3D - all points must exist in a single plane
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Math/Vector3.h"
#include <vector>

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
class Matrix3;
class Polygon2;

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
class Polygon3
{
public:
	//-----Public Methods-----

	Polygon3() {}
	Polygon3(const std::vector<Vector3>& vertices);

	int			AddVertex(const Vector3& vertex);
	Vector3		GetVertex(int index) const { return m_vertices[index]; }
	int			GetNumVertices() const { return (int)m_vertices.size(); }
	void		TransformSelfInto2DBasis(Polygon2& out_poly2) const;
	Vector2		TransformPointInto2DBasis(const Vector3& point) const;
	Vector3		TransformPointOutOf2DBasis(const Vector2& point) const;

	bool		IsSelfIntersecting() const;
	bool		IsConvex() const;
	bool		IsConvave() const { return !IsConvex(); }


private:
	//-----Private Methods-----

	void		GetBasis(Matrix3& out_bases) const;


private:
	//-----Private Data-----

	std::vector<Vector3> m_vertices; // Private so that we can do asserts

};

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
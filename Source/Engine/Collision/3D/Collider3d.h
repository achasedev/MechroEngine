///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: March 18th, 2021
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Framework/EngineCommon.h"
#include "Engine/Math/Capsule3d.h"
#include "Engine/Math/OBB3.h"
#include "Engine/Math/Sphere3d.h"
#include "Engine/Utility/StringId.h"

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
class Polygon3D;
class Transform;

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
class Collider3d
{
public:
	//-----Public Methods-----
	RTTI_BASE_CLASS(Collider3d);

	Collider3d(Transform* transform = nullptr)
		: m_transform(transform) {}


protected:
	//-----Protected Data-----

	Transform* m_transform = nullptr; // If nullptr, treat all positions as world space

};


//-------------------------------------------------------------------------------------------------
class BoxCollider3d : public Collider3d
{
public:
	//-----Public Methods-----
	RTTI_DERIVED_CLASS(BoxCollider3d);

	BoxCollider3d() {}
	BoxCollider3d(const OBB3& localBounds);

	void SetLocalBounds(const OBB3& localBounds);

	OBB3 GetWorldBounds() const;


private:
	//-----Private Data-----

	OBB3 m_bounds;

};


//-------------------------------------------------------------------------------------------------
class SphereCollider3d : public Collider3d
{
public:
	//-----Public Methods-----
	RTTI_DERIVED_CLASS(SphereCollider3d);

	Sphere3d GetWorldBounds() const;


private:
	//-----Private Data-----

	Sphere3d m_bounds;

};


//-------------------------------------------------------------------------------------------------
class CapsuleCollider3d : public Collider3d
{
public:
	//-----Public Methods-----
	RTTI_DERIVED_CLASS(CapsuleCollider3d);

	Capsule3d GetWorldBounds() const;


private:
	//-----Private Data-----

	Capsule3d m_bounds;

};


//-------------------------------------------------------------------------------------------------
class PolytopeCollider3d : public Collider3d 
{
public:
	//-----Public Methods-----
	RTTI_DERIVED_CLASS(PolytopeCollider3d);

	Polygon3D* GetWorldBounds() const;


private:
	//-----Private Data-----

	Polygon3D* m_bounds = nullptr;

};


///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: April 2nd, 2020
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Framework/EngineCommon.h"
#include "Engine/Math/IntVector3.h"

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
enum TextureUsageBit : uint32
{
	TEXTURE_USAGE_SHADER_RESOURCE_BIT		= BIT_FLAG(0),	// Can be used to create a ShaderResourceView
	TEXTURE_USAGE_RENDER_TARGET_BIT			= BIT_FLAG(1),	// Can be used to create a ColorTargetView
	TEXTURE_USAGE_DEPTH_STENCIL_TARGET_BIT	= BIT_FLAG(2),	// Can be used to create a DepthStencilTargetView
};

typedef uint32 TextureUsageBits;
class Texture;
struct ID3D11View;
struct ID3D11ShaderResourceView;
struct ID3D11RenderTargetView;
struct ID3D11DepthStencilView;

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
class TextureView
{
	friend class Texture;

public:

	virtual ~TextureView();

	int GetWidth() const { return m_dimensions.x; }
	int GetHeight() const { return m_dimensions.y; }


protected:
	//-----Protected Data-----

	TextureUsageBits	m_usage = 0;
	const Texture*		m_sourceTexture = nullptr;
	IntVector3			m_dimensions = IntVector3::ZERO;
	uint32				m_byteSize = 0;

	union
	{
		ID3D11View*					m_dxView = nullptr;
		ID3D11ShaderResourceView*	m_dxSRV;
		ID3D11RenderTargetView*		m_dxRTV;
		ID3D11DepthStencilView*		m_dxDSV;
	};

};


///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

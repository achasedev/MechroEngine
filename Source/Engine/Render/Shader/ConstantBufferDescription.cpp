///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: Oct 24th, 2021
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Core/EngineCommon.h"
#include "Engine/Render/Shader/ConstantBufferDescription.h"
#include "Engine/Render/Shader/ConstantVariableDescription.h"

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS IMPLEMENTATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
// Constructor
ConstantBufferDescription::ConstantBufferDescription(const StringID& name, int bindSlot, int byteSize)
	: m_name(name)
	, m_bindSlot(bindSlot)
	, m_byteSize(byteSize)
{
}


//-------------------------------------------------------------------------------------------------
// Adds a description for a variable within this buffer
void ConstantBufferDescription::AddVariableDescription(ConstantVariableDescription* varDescription)
{
	m_variableDescriptions.push_back(varDescription);
}


//-------------------------------------------------------------------------------------------------
// Returns the variable description at the given index
const ConstantVariableDescription* ConstantBufferDescription::GetVariableDescription(int index) const
{
	return m_variableDescriptions[index];
}


//-------------------------------------------------------------------------------------------------
// Returns the variable description with the given name
const ConstantVariableDescription* ConstantBufferDescription::GetVariableDescription(const StringID& variableName) const
{
	for (ConstantVariableDescription* desc : m_variableDescriptions)
	{
		if (desc->GetName() == variableName)
		{
			return desc;
		}
	}

	return nullptr;
}

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: March 15th, 2020
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Math/Matrix4.h"
#include "Engine/Core/EngineCommon.h"
#include "Engine/Render/Light.h"
#include "Engine/Render/Shader.h"

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
class Mesh;
class Material;
class Renderable;

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
class DrawCall
{
public:
	//-----Public Methods-----

	void		SetFromRenderable(const Renderable& renderable, uint32 drawCallIndex);
	void		SetAmbience(const Rgba& ambience) { m_ambience = ambience; }
	void		SetNumLightsInUse(int numLights) { m_numLightsInUse = numLights; }
	void		SetLight(int lightIndex, Light* light);

	Mesh*		GetMesh() const { return m_mesh; }
	Material*	GetMaterial() const { return m_material; }
	Matrix4		GetModelMatrix() const { return m_modelMatrix; }
	int			GetSortOrder() const;


private:
	//-----Private Data-----

	Mesh*			m_mesh = nullptr;
	Material*		m_material = nullptr;
	Matrix4			m_modelMatrix;

	// For sorting in the ForwardRenderer
	int				m_renderLayer = 0;
	RenderQueue		m_renderQueue = RENDER_QUEUE_OPAQUE;

	// Lights
	Rgba			m_ambience = Rgba::WHITE;
	int				m_numLightsInUse = 0;
	Light*			m_lights[MAX_NUMBER_OF_LIGHTS];

};

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

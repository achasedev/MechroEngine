///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: March 15th, 2020
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------
#pragma once

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Core/EngineCommon.h"
#include "Engine/Core/Entity.h"
#include "Engine/Math/Matrix4.h"
#include <vector>

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------
class Mesh;
class Material;
struct RenderableDraw
{
	Matrix4		m_drawMatrix;
	Mesh*		m_mesh = nullptr;
	Material*	m_material = nullptr;
};

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
class Renderable
{
public:
	//-----Public Methods-----

	Renderable() {}
	Renderable(EntityID owningEntity);

	void			SetDrawMatrix(uint32 drawIndex, const Matrix4& drawMatrix);
	void			SetDrawMaterial(uint32 drawIndex, Material* material);
	void			SetDrawMesh(uint32 drawIndex, Mesh* mesh);
	void			SetDraw(uint32 drawIndex, const RenderableDraw& draw);
	void			SetModelMatrix(const Matrix4& rendMatrix) { m_matrix = rendMatrix; }
	void			AddDraw(Mesh* mesh, Material* material, Matrix4 drawMatrix = Matrix4::IDENTITY);

	uint32			GetNumDrawCalls() const { return (uint32)m_draws.size(); }
	RenderableDraw	GetDraw(uint32 drawIndex) const;
	Matrix4			GetModelMatrix() const { return m_matrix; }

	bool			IsReadyForDrawing() const;


private:
	//-----Private Data-----

	Matrix4							m_matrix = Matrix4::IDENTITY;
	std::vector<RenderableDraw>		m_draws;
	EntityID						m_owningEntity = INVALID_ENTITY_ID;

};


///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

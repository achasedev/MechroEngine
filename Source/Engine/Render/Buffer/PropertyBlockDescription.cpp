///--------------------------------------------------------------------------------------------------------------------------------------------------
/// Author: Andrew Chase
/// Date Created: Oct 24th, 2021
/// Description: 
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// INCLUDES
///--------------------------------------------------------------------------------------------------------------------------------------------------
#include "Engine/Core/EngineCommon.h"
#include "Engine/Render/Buffer/PropertyBlockDescription.h"
#include "Engine/Render/Buffer/PropertyDescription.h"

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// DEFINES
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// ENUMS, TYPEDEFS, STRUCTS, FORWARD DECLARATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// GLOBALS AND STATICS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// C FUNCTIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

///--------------------------------------------------------------------------------------------------------------------------------------------------
/// CLASS IMPLEMENTATIONS
///--------------------------------------------------------------------------------------------------------------------------------------------------

//-------------------------------------------------------------------------------------------------
// Constructor
PropertyBlockDescription::PropertyBlockDescription(const StringID& name, int bindSlot, int byteSize)
	: m_name(name)
	, m_bindSlot(bindSlot)
	, m_byteSize(byteSize)
{
}


//-------------------------------------------------------------------------------------------------
// Destructor
PropertyBlockDescription::~PropertyBlockDescription()
{
	SafeDeleteVector(m_propertyDescriptions);
}


//-------------------------------------------------------------------------------------------------
// Adds a description for a variable within this buffer
void PropertyBlockDescription::AddPropertyDescription(PropertyDescription* description)
{
	m_propertyDescriptions.push_back(description);
}


//-------------------------------------------------------------------------------------------------
// Returns the variable description at the given index (in order they are organized in the block)
const PropertyDescription* PropertyBlockDescription::GetPropertyDescription(int index) const
{
	return m_propertyDescriptions[index];
}


//-------------------------------------------------------------------------------------------------
// Returns the variable description with the given name
const PropertyDescription* PropertyBlockDescription::GetPropertyDescription(const StringID& propertyName) const
{
	for (PropertyDescription* desc : m_propertyDescriptions)
	{
		if (desc->GetName() == propertyName)
		{
			return desc;
		}
	}

	return nullptr;
}
